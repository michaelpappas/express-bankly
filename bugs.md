1. routes/users - patch - allows changing variables other than firstName, lastName, phone, and email. Added jsonSchema and validation. This was tricky because the tests were passing by throwing a 401 because of the incorrect requireAdmin middleware from bug #3 so it looked like the route was correct.
2. /routes/users - get - returns too much information - should only return username, firstname, lastname. Test only confirms that three users are returned but doesn't verify information itself.
3. routes/users - patch - had requireAdmin() middleware that kept users from editing their own profile. - removed requireAdmin() because login route ensured own user or admin later in the route.
4. routes/users/:username should return 404 if user isn't found but just returns empty json. There was no test present for this. - models/user/get(username) was missing the "throw" in the error so it wasn't actually throwing the error and just continuing to return the the empty user. (NOTE - when I confirm the fix I did in insomnia the error code comes back as a 404 as expected. In my tests the error code that comes back is a 401 and I cannot figure out why this happens!)
5. In routes/auth/login(post) there was no await before `User.authenticate(username, password)` Because this made `user` undefined, when the token was created using `user.admin` it was always making the token with `admin: false` regardless of the actual admin status for that user.
6. In routes/users - patch - The docstring for patch says to return everything but it is unnecessary and potentially dangerous to be return even a hashed password. I changed the sql query from returning all to returning everything but the password.